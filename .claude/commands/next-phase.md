# 次の Phase 自動開始コマンド

次に実行すべき Phase を自動的に判断して開始します。

## 実行手順

### 1. PROGRESS.md の読み込み
`docs/ticket/initial/PROGRESS.md` を読み込んで現在の状況を把握します。

### 2. 現在の Phase 状況の確認
- 進行中の Phase があるかチェック
- 完了した Phase のリストを確認
- 未着手の Phase のリストを確認

### 3. 条件チェック

#### ケース A: 進行中の Phase がある場合
```
⚠️ Phase X が現在進行中です。

先に以下のコマンドで Phase X を完了させてください:
/complete-phase X

または、Phase X の作業を続行してください。
```
→ 処理を中断

#### ケース B: すべての Phase が完了している場合
```
🎉 おめでとうございます！すべての Phase が完了しています！

次のステップ:
1. /ticket-status でプロジェクト全体の進捗を確認
2. 残っている Bug や Feature チケットに取り組む
3. 初期プレリリースの準備を進める
```
→ 処理を中断

#### ケース C: 次の Phase を開始できる場合
次に実行すべき Phase を判断します：
1. Phase は順番に実行する必要がある
2. Phase 1 → Phase 2 → Phase 3 ... の順序
3. 最後に完了した Phase の次の Phase を選択

### 4. 次の Phase の表示
```markdown
## 📋 次の Phase

**Phase X: [タイトル]**

**予定時間**: X-X日
**内容**: [Phase の説明]

この Phase を開始しますか？ (y/n)
```

### 5. ユーザー確認
- `y` の場合: `/start-phase X` を自動実行
- `n` の場合: 処理を中断

### 6. start-phase コマンドの実行
ユーザーが承認した場合、`/start-phase X` コマンドを実行します。

## 使用例

### 例1: Phase 2 完了後
```
$ /next-phase

✅ Phase 2 が完了しています。

## 📋 次の Phase

**Phase 3: 地図インフラストラクチャ**

**予定時間**: 2-3日
**内容**: Leaflet を使った地図表示、カフェマーカー、カフェデータAPI の実装

この Phase を開始しますか？ (y/n)
> y

Phase 3 を開始します...
[/start-phase 3 が実行される]
```

### 例2: Phase 進行中
```
$ /next-phase

⚠️ Phase 3 が現在進行中です。

先に以下のコマンドで Phase 3 を完了させてください:
/complete-phase 3

または、Phase 3 の作業を続行してください。
```

### 例3: すべて完了
```
$ /next-phase

🎉 おめでとうございます！すべての Phase (9/9) が完了しています！

プロジェクトの総所要時間: 12日
初期予定: 11-18日
達成率: 133%

次のステップ:
1. /ticket-status でプロジェクト全体の進捗を確認
2. 残っている Bug チケット (3件) に取り組む
3. Feature チケット (2件) の実装を検討
4. 初期プレリリースの準備を進める
```

## 重要事項
- Phase は必ず順番に実行すること
- 進行中の Phase がある場合は開始しないこと
- ユーザーの承認を必ず得ること
- PROGRESS.md の情報を信頼すること
